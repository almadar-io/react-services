!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.mediaService=t():(e["react-services"]=e["react-services"]||{},e["react-services"].mediaService=t())}(window,function(){return function(e){function t(t){for(var o,a,u=t[0],c=t[1],l=t[2],p=0,s=[];p<u.length;p++)a=u[p],r[a]&&s.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(f&&f(t);s.length;)s.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,u=1;u<n.length;u++){var c=n[u];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={4:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/lib/";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=c;return i.push([18,0]),n()}({18:function(e,t,n){"use strict";n.r(t),n.d(t,"mediaDomainStore",function(){return O}),n.d(t,"Media",function(){return j});var o,r,i=n(5),a=n(1),u=n(2),c=n.n(u),l=n(4),f=n.n(l);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function g(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var O=(g((o=function(){function e(t,n,o){b(this,e),this.modelName=void 0,this.gallery=a.u.map(),this.media=a.u.map(),this.rootStore=void 0,this.SERVER=void 0,this.offlineStorage=void 0,this.rootStore=t,n&&(this.offlineStorage=n),this.SERVER=o}return v(e,[{key:"uploadMedia",value:function(e){var t=this,n=e.modelName,o=e.extension,r=e.files,i=e.modelId,a=e.isMultiple,u=e.subRoute,c=new FormData;r.map(function(e,t){var r=new Blob([e],{type:o}),i=o.replace("image/",".");c.append(n+i,r,e.name.split(".")[0])});var l="".concat(u||"/",a?"gallery":"media");return this.offlineStorage.getItem("jwtToken").then(function(e){return f.a.post("".concat(t.SERVER.host,":").concat(t.SERVER.port,"/").concat(n).concat(l,"?token=").concat(e,"&query=").concat(i),c,{headers:{"content-type":"multipart/form-data"}}).then(function(e){return console.log("response from media",e),e}).catch(function(e){return t.setError(e)})})}},{key:"deleteMedia",value:function(e){var t=this,n=e.modelName,o=e.modelId,r=e.fileName,i=(e.subRoute,r.split("/")),a=i[i.length-1].split("?")[0];var u="".concat("/remove/","media");return this.offlineStorage.getItem("jwtToken").then(function(e){return f.a.delete("".concat(t.SERVER.host,":").concat(t.SERVER.port,"/").concat(n).concat(u,"?token=").concat(e,"&query=").concat(o,"&fileName=").concat(a)).then(function(e){return console.log("response from media",e),e}).catch(function(e){return t.setError(e)})})}},{key:"setError",value:function(e){console.error(e)}}]),e}()).prototype,"uploadMedia",[a.h],Object.getOwnPropertyDescriptor(o.prototype,"uploadMedia"),o.prototype),g(o.prototype,"setError",[a.h],Object.getOwnPropertyDescriptor(o.prototype,"setError"),o.prototype),o),S=function(e){var t=e.mediaDomainStore,n=e.modelName,o=e.props,r=e.child,i=e.extension,a=e.subRoute,u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){y(e,t,n[t])})}return e}({},o,r.props);return u["".concat(n,"_gallery")]=t.gallery.get(n),u["".concat(n,"_gallery_upload")]=function(e,o){return t.uploadMedia({modelName:n,extension:i,isMultiple:!0,files:o,modelId:e,subRoute:a})},u["".concat(n,"_media")]=t.media.get(n),u["".concat(n,"_media_upload")]=function(e,o){return t.uploadMedia({modelName:n,extension:i,isMultiple:!1,files:o,modelId:e,subRoute:a})},u["".concat(n,"_media_delete")]=function(e,o){return t.deleteMedia({modelName:n,modelId:e,fileName:o,subRoute:a})},u},j=Object(i.a)(r=function(e){function t(e){return b(this,t),s(this,d(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,c.a.Component),v(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.modelName,o=t.children,r=t.mediaDomainStore,i=t.extension,a=t.subRoute,u=c.a.Children.map(o,function(t){var o=S({mediaDomainStore:r,modelName:n,props:e.props,child:t,extension:i,subRoute:a});return c.a.cloneElement(t,o)});return c.a.createElement(c.a.Fragment,null,u)}}]),t}())||r}})});
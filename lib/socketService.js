!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.socketService=t():(e["react-services"]=e["react-services"]||{},e["react-services"].socketService=t())}(window,function(){return function(e){function t(t){for(var o,c,u=t[0],l=t[1],a=t[2],f=0,s=[];f<u.length;f++)c=u[f],r[c]&&s.push(r[c][0]),r[c]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(p&&p(t);s.length;)s.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,u=1;u<n.length;u++){var l=n[u];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={6:0},i=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/lib/";var u=window.webpackJsonp=window.webpackJsonp||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var a=0;a<u.length;a++)t(u[a]);var p=l;return i.push([19,0,1]),n()}({19:function(e,t,n){"use strict";n.r(t),n.d(t,"socketDomainStore",function(){return w}),n.d(t,"Socket",function(){return S});var o,r,i,c=n(5),u=n(1),l=n(2),a=n.n(l),p=(n(4),n(15)),f=n.n(p);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function g(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var w=(r=g((o=function(){function e(t,n){d(this,e),function(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}(this,"isConnected",r,this),this.socket=void 0,this.rootStore=void 0,this.SERVER=void 0,this.mapStore=u.u.map(),this.rootStore=t,this.SERVER=n}return O(e,[{key:"subscribe",value:function(e){var t=this,n=e.onInit,o=e.onConnect,r=e.onEvent,i=e.onDisconnect,c=e.channel,u=e.port,l="".concat(this.SERVER.socket,":").concat(u,"/").concat(c),a=f()(l);a.on("init",function(e){n(e)}),a.on("connect",function(){o()}),a.on(c,function(e){r(e),t.mapStore.set(c,[]),t.mapStore.set(c,[e])}),a.on("disconnect",function(){i()}),this.socket=a}},{key:"publish",value:function(e){var t=this,n=e.channel,o=e.value;return console.log(n,o),new Promise(function(e,r){t.socket.emit("".concat(n),o,function(t){return e(t)})})}},{key:"publishUpdate",value:function(e){var t=this,n=e.channel,o=e.value;return new Promise(function(e,r){t.socket.emit("".concat(n,"-update"),o,function(t){return e(t)})})}},{key:"publishDelete",value:function(e){var t=this,n=e.channel,o=e.value;return console.log("publish delete",n,o),new Promise(function(e,r){t.socket.emit("".concat(n,"-delete"),o,function(t){return e(t)})})}}]),e}()).prototype,"isConnected",[u.u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g(o.prototype,"subscribe",[u.h],Object.getOwnPropertyDescriptor(o.prototype,"subscribe"),o.prototype),g(o.prototype,"publish",[u.h],Object.getOwnPropertyDescriptor(o.prototype,"publish"),o.prototype),g(o.prototype,"publishUpdate",[u.h],Object.getOwnPropertyDescriptor(o.prototype,"publishUpdate"),o.prototype),g(o.prototype,"publishDelete",[u.h],Object.getOwnPropertyDescriptor(o.prototype,"publishDelete"),o.prototype),o),j=function(e,t,n,o){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){v(e,t,n[t])})}return e}({channel:t,publish:function(n){return e.publish({value:n,channel:t})},subscribe:function(t){var n=t.onConnect,o=t.onEvent,r=t.onDisconnect,i=t.channel,c=t.onInit,u=t.port;return e.subscribe({onConnect:n,onEvent:o,onDisconnect:r,channel:i,onInit:c,port:u})}},n,o.props);return r["incoming_".concat(t)]=e.mapStore.get(t),r["".concat(t,"_update")]=function(n){return e.publishUpdate({channel:t,value:n})},r["".concat(t,"_delete")]=function(n){return e.publishDelete({channel:t,value:n})},r},S=Object(c.a)(i=function(e){function t(e){return d(this,t),b(this,y(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.a.Component),O(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.channel,o=t.children,r=t.socketDomainStore,i=a.a.Children.map(o,function(t){var o=j(r,n,e.props,t);return a.a.cloneElement(t,o)});return a.a.createElement(a.a.Fragment,null,i)}}]),t}())||i},43:function(e,t){}})});
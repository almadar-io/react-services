!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.index=e():(t["react-services"]=t["react-services"]||{},t["react-services"].index=e())}(window,function(){return function(t){function e(e){for(var o,c,a=e[0],u=e[1],s=e[2],f=0,p=[];f<a.length;f++)c=a[f],r[c]&&p.push(r[c][0]),r[c]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={0:0},i=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/lib/";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var s=0;s<a.length;s++)e(a[s]);var l=u;return i.push([219,1]),n()}({195:function(t,e,n){var o={"./af":29,"./af.js":29,"./ar":30,"./ar-dz":31,"./ar-dz.js":31,"./ar-kw":32,"./ar-kw.js":32,"./ar-ly":33,"./ar-ly.js":33,"./ar-ma":34,"./ar-ma.js":34,"./ar-sa":35,"./ar-sa.js":35,"./ar-tn":36,"./ar-tn.js":36,"./ar.js":30,"./az":37,"./az.js":37,"./be":38,"./be.js":38,"./bg":39,"./bg.js":39,"./bm":40,"./bm.js":40,"./bn":41,"./bn.js":41,"./bo":42,"./bo.js":42,"./br":43,"./br.js":43,"./bs":44,"./bs.js":44,"./ca":45,"./ca.js":45,"./cs":46,"./cs.js":46,"./cv":47,"./cv.js":47,"./cy":48,"./cy.js":48,"./da":49,"./da.js":49,"./de":50,"./de-at":51,"./de-at.js":51,"./de-ch":52,"./de-ch.js":52,"./de.js":50,"./dv":53,"./dv.js":53,"./el":54,"./el.js":54,"./en-SG":55,"./en-SG.js":55,"./en-au":56,"./en-au.js":56,"./en-ca":57,"./en-ca.js":57,"./en-gb":58,"./en-gb.js":58,"./en-ie":59,"./en-ie.js":59,"./en-il":60,"./en-il.js":60,"./en-nz":61,"./en-nz.js":61,"./eo":62,"./eo.js":62,"./es":63,"./es-do":64,"./es-do.js":64,"./es-us":65,"./es-us.js":65,"./es.js":63,"./et":66,"./et.js":66,"./eu":67,"./eu.js":67,"./fa":68,"./fa.js":68,"./fi":69,"./fi.js":69,"./fo":70,"./fo.js":70,"./fr":71,"./fr-ca":72,"./fr-ca.js":72,"./fr-ch":73,"./fr-ch.js":73,"./fr.js":71,"./fy":74,"./fy.js":74,"./ga":75,"./ga.js":75,"./gd":76,"./gd.js":76,"./gl":77,"./gl.js":77,"./gom-latn":78,"./gom-latn.js":78,"./gu":79,"./gu.js":79,"./he":80,"./he.js":80,"./hi":81,"./hi.js":81,"./hr":82,"./hr.js":82,"./hu":83,"./hu.js":83,"./hy-am":84,"./hy-am.js":84,"./id":85,"./id.js":85,"./is":86,"./is.js":86,"./it":87,"./it-ch":88,"./it-ch.js":88,"./it.js":87,"./ja":89,"./ja.js":89,"./jv":90,"./jv.js":90,"./ka":91,"./ka.js":91,"./kk":92,"./kk.js":92,"./km":93,"./km.js":93,"./kn":94,"./kn.js":94,"./ko":95,"./ko.js":95,"./ku":96,"./ku.js":96,"./ky":97,"./ky.js":97,"./lb":98,"./lb.js":98,"./lo":99,"./lo.js":99,"./lt":100,"./lt.js":100,"./lv":101,"./lv.js":101,"./me":102,"./me.js":102,"./mi":103,"./mi.js":103,"./mk":104,"./mk.js":104,"./ml":105,"./ml.js":105,"./mn":106,"./mn.js":106,"./mr":107,"./mr.js":107,"./ms":108,"./ms-my":109,"./ms-my.js":109,"./ms.js":108,"./mt":110,"./mt.js":110,"./my":111,"./my.js":111,"./nb":112,"./nb.js":112,"./ne":113,"./ne.js":113,"./nl":114,"./nl-be":115,"./nl-be.js":115,"./nl.js":114,"./nn":116,"./nn.js":116,"./pa-in":117,"./pa-in.js":117,"./pl":118,"./pl.js":118,"./pt":119,"./pt-br":120,"./pt-br.js":120,"./pt.js":119,"./ro":121,"./ro.js":121,"./ru":122,"./ru.js":122,"./sd":123,"./sd.js":123,"./se":124,"./se.js":124,"./si":125,"./si.js":125,"./sk":126,"./sk.js":126,"./sl":127,"./sl.js":127,"./sq":128,"./sq.js":128,"./sr":129,"./sr-cyrl":130,"./sr-cyrl.js":130,"./sr.js":129,"./ss":131,"./ss.js":131,"./sv":132,"./sv.js":132,"./sw":133,"./sw.js":133,"./ta":134,"./ta.js":134,"./te":135,"./te.js":135,"./tet":136,"./tet.js":136,"./tg":137,"./tg.js":137,"./th":138,"./th.js":138,"./tl-ph":139,"./tl-ph.js":139,"./tlh":140,"./tlh.js":140,"./tr":141,"./tr.js":141,"./tzl":142,"./tzl.js":142,"./tzm":143,"./tzm-latn":144,"./tzm-latn.js":144,"./tzm.js":143,"./ug-cn":145,"./ug-cn.js":145,"./uk":146,"./uk.js":146,"./ur":147,"./ur.js":147,"./uz":148,"./uz-latn":149,"./uz-latn.js":149,"./uz.js":148,"./vi":150,"./vi.js":150,"./x-pseudo":151,"./x-pseudo.js":151,"./yo":152,"./yo.js":152,"./zh-cn":153,"./zh-cn.js":153,"./zh-hk":154,"./zh-hk.js":154,"./zh-tw":155,"./zh-tw.js":155};function r(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=195},216:function(t,e){},219:function(t,e,n){"use strict";n.r(e);var o,r,i,c,a,u,s,l,f,p=n(6),h=n(2),y=n(3),m=n.n(y),d=n(5),b=n.n(d);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){E(t,e,n[e])})}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t,e,n,o){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _(t,e,n){return e&&R(t.prototype,e),n&&R(t,n),t}function D(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var M,z,C=(r=D((o=function(){function t(e,n,o){P(this,t),this.token=void 0,k(this,"user",r,this),this.isLoggedIn=!1,this.offlineStorage=void 0,this.rootStore=void 0,this.SERVER=void 0,this.rootStore=e,n&&(this.offlineStorage=n),this.SERVER=o}return _(t,[{key:"logout",value:function(){return this.clearToken()}},{key:"forgotPassword",value:function(t){var e=this,n=t.email;return new Promise(function(t,o){return b.a.post("".concat(e.SERVER.host,":").concat(e.SERVER.port,"/auth/forgot-password"),{email:n}).then(function(e){return t(e.data)}).catch(function(t){return o(t&&t.response&&t.response.data)})})}},{key:"changePassword",value:function(t){var e=this,n=t.token,o=t.newPassword,r=t.email;return new Promise(function(t,i){return b.a.post("".concat(e.SERVER.host,":").concat(e.SERVER.port,"/auth/change-password"),{email:r,token:n,newPassword:o}).then(function(e){return t(e.data)}).catch(function(t){return i(t.response.data)})})}},{key:"resendConfirmationEmail",value:function(t){var e=this,n=t.email;return new Promise(function(t,o){return b.a.post("".concat(e.SERVER.host,":").concat(e.SERVER.port,"/auth/resend-email-confirmation"),{email:n}).then(function(e){return t(e.data)}).catch(function(t){return o(t&&t.response&&t.response.data)})})}},{key:"login",value:function(t){var e=this;return new Promise(function(n,o){return b.a.post("".concat(e.SERVER.host,":").concat(e.SERVER.port,"/auth"),t).then(function(t){return e.user=t.data,e.isLoggedIn=!0,e.storeToken(e.user.jwtToken,"jwtToken"),n(t.data)}).catch(function(t){return o(t&&t.response&&t.response.data)})})}},{key:"register",value:function(t){var e=this;return new Promise(function(n,o){return b.a.post("".concat(e.SERVER.host,":").concat(e.SERVER.port,"/auth/register"),t).then(function(t){return e.user=t.data,e.isLoggedIn=!0,e.storeToken(e.user.jwtToken),n(t.data)}).catch(function(t){return e.isLoggedIn=!1,o(t&&t.response&&t.response.data)})})}},{key:"loginWithProvider",value:function(t){window.location.replace("".concat(this.SERVER.host,":").concat(this.SERVER.port,"/").concat(t,"/auth"))}},{key:"registerWithProvider",value:function(t){window.location.replace("".concat(this.SERVER.host,":").concat(this.SERVER.port,"/").concat(t,"/auth"))}},{key:"storeToken",value:function(t,e){if(t)return this.offlineStorage.setItem(e,t)}},{key:"clearToken",value:function(){return this.offlineStorage.removeItem("jwtToken")}},{key:"isAuthenticated",value:function(){var t=this;return new Promise(function(e,n){return t.offlineStorage.getItem("jwtToken").then(function(o){return b.a.post("".concat(t.SERVER.host,":").concat(t.SERVER.port,"/jwt"),{token:o}).then(function(t){return e(t)}).catch(function(t){return n(t)})})})}}]),t}()).prototype,"user",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o),V=(c=D((i=function t(e){P(this,t),k(this,"username",c,this),k(this,"password",a,this),k(this,"email",u,this),k(this,"firstname",s,this),k(this,"lastname",l,this),this.rootStore=e}).prototype,"username",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=D(i.prototype,"password",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=D(i.prototype,"email",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=D(i.prototype,"firstname",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=D(i.prototype,"lastname",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i),T=Object(p.a)(function(t){var e=t.children,n=t.authUiStore,o=t.authDomainStore,r=m.a.Children.map(e,function(t){return m.a.cloneElement(t,w({onChange:function(t,e){n[t]=e},onSubmit:function(t){return o.login(t)},onProviderAuth:function(t){o.loginWithProvider(t)}},t.props))});return m.a.createElement(m.a.Fragment,null,r)}),N=Object(p.a)(function(t){var e=t.children,n=t.authUiStore,o=t.authDomainStore,r=m.a.Children.map(e,function(t){return m.a.cloneElement(e,w({onChange:function(t,e){n[t]=e},onSubmit:function(t){return o.register(t)},onProviderAuth:function(t){o.loginWithProvider(t)}},t.props))});return m.a.createElement(m.a.Fragment,null,r)}),x=function(t,e,n){return w({login:function(e){return t.login(e)},register:function(e){return t.register(e)},forgotPassword:function(e){return t.forgotPassword(e)},changePassword:function(e){var n=e.newPassword,o=e.email,r=e.token;return t.changePassword({newPassword:n,email:o,token:r})},loginWithProvider:function(e){return t.loginWithProvider(e)},registerWithProvider:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return t.registerWithProvider(registerWithProvider)}),resendConfirmationEmail:function(e){return t.resendConfirmationEmail(e)}},e,n.props)},I=Object(p.a)(f=function(t){function e(t){return P(this,e),g(this,j(e).call(this,t))}return O(e,m.a.Component),_(e,[{key:"componentDidMount",value:function(){this.props.authDomainStore.isAuthenticated()}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,o=e.authDomainStore,r=m.a.Children.map(n,function(e){var n=x(o,t.props,e);return m.a.cloneElement(e,n)});return m.a.createElement(m.a.Fragment,null,r)}}]),e}())||f;function A(t){var e;return Object(p.a)(e=function(e){function n(t){return P(this,n),g(this,j(n).call(this,t))}return O(n,m.a.Component),_(n,[{key:"componentDidMount",value:function(){this.props.authDomainStore.isAuthenticated()}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this.props.authDomainStore,n=x(e,this.props,this);return m.a.createElement(t,n)}}]),n}())||e}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){return!e||"object"!==U(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function H(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}function K(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Q=(K((M=function(){function t(e,n,o,r){J(this,t),this.modelName=void 0,this.mapStore=h.u.map(),this.rootStore=void 0,this.SERVER=void 0,this.offlineStorage=void 0,this.notificationDomainStore=void 0,this.rootStore=e,this.notificationDomainStore=r,n&&(this.offlineStorage=n),this.SERVER=o}return H(t,[{key:"forceUpdate",value:function(t){var e=this.mapStore.get(t);this.mapStore.set(t,[]),this.mapStore.set(t,e)}},{key:"getModel",value:function(t,e,n,o){var r=this;if(!this.mapStore.get(e)||n)return this.offlineStorage.getItem("jwtToken").then(function(n){return b.a.get("".concat(r.SERVER.host,":").concat(r.SERVER.port,"/").concat(e),{params:{token:n,query:t}}).then(function(t){Object(h.x)(function(){if(o){var n=o(t.data);return r.mapStore.set(e,n)}r.mapStore.set(e,t.data)})}).catch(function(t){r.setError(e,t)})}).catch(function(t){return r.setError(e,t)})}},{key:"createModel",value:function(t,e){var n=this;return this.offlineStorage.getItem("jwtToken").then(function(o){return b.a.post("".concat(n.SERVER.host,":").concat(n.SERVER.port,"/").concat(t,"/create"),{model:e,token:o}).then(function(o){var r=n.mapStore.get(t)||[e];return n.mapStore.set(t,G(r).concat([o.data])),n.setSuccess(t,"".concat(t," successfully created!")),o.data}).catch(function(e){return console.error("Create ".concat(t," failed!"),e),n.setError(t,e)})})}},{key:"updateModel",value:function(t,e,n){var o=this;Object(h.A)(e);return console.log("here"),Object.keys(n).map(function(t){e[t]=n[t]}),this.offlineStorage.getItem("jwtToken").then(function(n){return b.a.put("".concat(o.SERVER.host,":").concat(o.SERVER.port,"/").concat(t),{model:e,token:n}).then(function(n){var r=o.mapStore.get(t).map(function(t){return t._id===e._id?e:t});return o.mapStore.set(t,r),o.setSuccess(t,"".concat(t," successfully updated!")),n.data}).catch(function(e){return console.log("err",e),o.setError(t,e)})})}},{key:"deleteModel",value:function(t,e){var n=this;return e.deleted=!0,this.forceUpdate(t),this.offlineStorage.getItem("jwtToken").then(function(o){return b.a.delete("".concat(n.SERVER.host,":").concat(n.SERVER.port,"/").concat(t,"/").concat(e._id),{params:{token:o}}).then(function(e){return n.setSuccess(t,"".concat(t," successfully deleted!")),e.data}).catch(function(e){return n.setError(t,e)})})}},{key:"searchModel",value:function(t,e){var n=this;return this.offlineStorage.getItem("jwtToken").then(function(o){return b.a.post("".concat(n.SERVER.host,":").concat(n.SERVER.port,"/").concat(t,"/search"),{query:e,token:o}).then(function(t){return t.data}).catch(function(e){return n.setError(t,e)})})}},{key:"setError",value:function(t,e){this.notificationDomainStore&&this.notificationDomainStore.saveNotification(t,{message:e&&e.response&&e.response.data.message,type:"error"})}},{key:"setSuccess",value:function(t,e){this.notificationDomainStore&&this.notificationDomainStore.saveNotification(t,{message:e,type:"success"})}},{key:"getAppSettings",value:function(){var t=this;return this.offlineStorage.getItem("jwtToken").then(function(e){return b.a.get("".concat(t.SERVER.host,":").concat(t.SERVER.port,"/settings"),{params:{token:e}}).then(function(e){return Object(h.x)(function(){t.mapStore.set("settings",e.data)}),e.data[0]}).catch(function(e){t.setError("settings",e)})})}}]),t}()).prototype,"forceUpdate",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"forceUpdate"),M.prototype),K(M.prototype,"getModel",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"getModel"),M.prototype),K(M.prototype,"createModel",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"createModel"),M.prototype),K(M.prototype,"updateModel",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"updateModel"),M.prototype),K(M.prototype,"deleteModel",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"deleteModel"),M.prototype),K(M.prototype,"searchModel",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"searchModel"),M.prototype),K(M.prototype,"setError",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"setError"),M.prototype),K(M.prototype,"setSuccess",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"setSuccess"),M.prototype),K(M.prototype,"getAppSettings",[h.h],Object.getOwnPropertyDescriptor(M.prototype,"getAppSettings"),M.prototype),M),Y=function(t,e,n,o,r,i){var c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){L(t,e,n[e])})}return t}({getModel:function(n){return t.getModel(n,e,!0,i)},createModel:function(n){return t.createModel(e,n)},updateModel:function(n,o){return t.updateModel(e,n,o)},deleteModel:function(n){return t.deleteModel(e,n)},query:r},n,o.props);return c[e]=i?i(t.mapStore.get(e)):t.mapStore.get(e),c["".concat(e,"_getModel")]=function(n){t.getModel(n,e,!0,i)},c["".concat(e,"_createModel")]=function(n){return t.createModel(e,n)},c["".concat(e,"_updateModel")]=function(n,o){return t.updateModel(e,n,o)},c["".concat(e,"_deleteModel")]=function(n){return t.deleteModel(e,n)},c["".concat(e,"_searchModel")]=function(n){return t.searchModel(e,n)},c.searchModels=function(e,n){return e.map(function(e){return t.searchModel(e,n).then(function(t){return{modelName:e,res:t}})})},c["".concat(e,"_query")]=r,c},Z=Object(p.a)(z=function(t){function e(t){return J(this,e),W(this,F(e).call(this,t))}return q(e,m.a.Component),H(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.modelName,o=e.children,r=e.crudDomainStore,i=e.skipLoadOnInit,c=e.query,a=e.transform;n&&!i&&r.getModel(c,n,!1);var u=m.a.Children.map(o,function(e){var o=Y(r,n,t.props,e,c,a);return m.a.cloneElement(e,o)});return m.a.createElement(m.a.Fragment,null,u)}}]),e}())||z;var $=n(8);function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ot(t,e,n){return e&&nt(t.prototype,e),n&&nt(t,n),t}function rt(t,e){return!e||"object"!==tt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){st(t,e,n[e])})}return t}function st(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ft=$.a.model("Filter",{name:$.a.string,value:$.a.string}),pt=function(t,e,n,o,r){var i=ut({},n,o.props);return i[e]=r?r(t.state):t.state,i["".concat(e,"_getModel")]=function(){t.getModel(r)},i["".concat(e,"_createModel")]=function(e){return t.createModel(e)},i["".concat(e,"_updateModel")]=function(e,n){return t.updateModel(e,n)},i["".concat(e,"_deleteModel")]=function(e){return t.deleteModel(e)},i["".concat(e,"_searchModel")]=function(e){return t.searchModel(e)},i.searchModels=function(e,n){return n.map(function(n){return t.searchModels(e,n).then(function(t){return{res:t}})})},i["".concat(e,"_set_filter")]=function(e){return t.setFilter(e)},i["".concat(e,"_remove_filter")]=function(e){return t.removeFilter(e)},i["".concat(e,"_loading")]=t.isLoading(),i},ht=function(t){function e(t){var n;return et(this,e),(n=rt(this,it(e).call(this,t))).stores={},n}return ct(e,m.a.Component),ot(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.modelName,o=e.children,r=e.skipLoadOnInit,i=e.transform,c=e.offlineStorage,a=e.SERVER,u=e.notificationDomainStore;if(n&&!this.stores[n]&&!r){var s=function(t,e,n,o,r){return $.a.model({id:$.a.identifier,state:$.a.frozen(),status:$.a.string,loading:$.a.optional($.a.boolean,!0),filters:$.a.array(ft)}).actions(function(i){return{fetchModel:function(){return i.loading=!0,e.getItem("jwtToken").then(function(e){return b.a.get("".concat(n.host,":").concat(n.port,"/").concat(t),{params:{token:e}}).then(function(t){r?i.setSuccess(r(t.data)):i.setSuccess(t.data)}).catch(function(t){i.setError(t)})}).catch(function(t){return i.setError(t)})},createModel:function(o){return i.loading=!0,e.getItem("jwtToken").then(function(e){return b.a.post("".concat(n.host,":").concat(n.port,"/").concat(t,"/create"),{model:o,token:e}).then(function(e){return i.setSuccess(lt(i.state).concat([o]),"".concat(t," successfully created!")),e.data}).catch(function(t){return i.setError(t)})})},updateModel:function(o,r){return i.loading=!0,Object.keys(r).map(function(t){o[t]=r[t]}),e.getItem("jwtToken").then(function(e){return b.a.put("".concat(n.host,":").concat(n.port,"/").concat(t),{model:o,token:e}).then(function(e){i.setSuccess(lt(i.state.filter(function(t){return o._id!==t._id})).concat([o]),"".concat(t," successfully updated!"))}).catch(function(t){return i.setError(t)})})},deleteModel:function(o){return i.loading=!0,e.getItem("jwtToken").then(function(e){return b.a.delete("".concat(n.host,":").concat(n.port,"/").concat(t,"/").concat(o._id),{params:{token:e}}).then(function(e){i.setSuccess(i.state.filter(function(t){return t!==o}),"".concat(t," successfully deleted!"))}).catch(function(t){return i.setError(t)})})},searchModel:function(o){return i.loading=!0,e.getItem("jwtToken").then(function(e){return b.a.post("".concat(n.host,":").concat(n.port,"/").concat(t,"/search"),{query:o,token:e}).then(function(t){return t.data}).catch(function(t){return console.log("err",t),i.setError(t)})})},searchModels:function(t,o){return i.loading=!0,e.getItem("jwtToken").then(function(e){return b.a.post("".concat(n.host,":").concat(n.port,"/").concat(o,"/search"),{query:t,token:e}).then(function(t){return t.data}).catch(function(t){return console.log("err",t),i.setError(t)})})},setFilter:function(t){i.filters.find(function(e){return e.name===t.name})||i.filters.push(t)},removeFilter:function(t){i.filters=i.filters.filter(function(e){return e.name!==t.name})},setError:function(e){i.loading=!1,o&&o.saveNotification(t,{message:e.response?e&&e.response&&e.response.data.message:e,type:"error"}),i.status="error"},setSuccess:function(e,n){i.loading=!1,o&&n&&o.saveNotification(t,{message:n,type:"success"}),e&&(i.state=e),i.status="success"}}}).views(function(t){return{getModel:function(){return t.state},isLoading:function(){return t.loading}}})}(n,c,a,u,i).create({state:[],id:"1",status:"initial"});s.fetchModel(),this.stores[n]=s}var l=m.a.Children.map(o,function(e){var o=pt(t.stores[n],n,t.props,e,i);return m.a.cloneElement(e,ut({},o))});return m.a.createElement(m.a.Fragment,null,l)}}]),e}();function yt(t){var e=function(e){function n(t){return et(this,n),rt(this,it(n).call(this,t))}return ct(n,m.a.Component),ot(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.crudDomainStore,n=t.transform;e.getModel(n)}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this.props,n=e.crudDomainStore,o=e.transform,r=pt(n,this.props,this,o);return m.a.createElement(t,r)}}]),n}();return Object(p.a)(e)}var mt=Object(p.a)(ht),dt=n(4),bt=n(1),vt=n.n(bt);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function St(t,e){return!e||"object"!==gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pt=function(t){return t?t.map(function(t){if(t.recurringRule&&"string"==typeof t.recurringRule){var e=dt.a.fromString(t.recurringRule);t.recurringRuleValue=e.toText(),t.instances=e.all()}return t}):t},Rt=function(t,e){var n=t.events_getModel,o=t.events_createModel,r=t.events_updateModel,i=t.events_deleteModel;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){kt(t,e,n[e])})}return t}({},t,e.props,{events_getModel:function(t){return n(t,function(t){Pt(t)})},events_createModel:function(t){o(function(t){if(t.isRecurring){var e=new dt.a({freq:dt.a[t.recurringRule],dtstart:vt()(t.startDateTime).utc().toDate(),until:vt()(t.endDateTime).utc().toDate()});return t.recurringRule=e.toString(),t}return t}(t))},events_updateModel:function(t,e){return r(t,e)},events_deleteModel:function(t){return i(t)}})},_t=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),St(this,wt(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(e,m.a.Component),function(t,e,n){e&&Ot(t.prototype,e),n&&Ot(t,n)}(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var t=this,e=this.props.children,n=m.a.Children.map(e,function(e){var n=Rt(t.props,e);return m.a.cloneElement(e,n)});return m.a.createElement(m.a.Fragment,null,n)}}]),e}(),Dt=function(t){var e=t.crudDomainStore,n=jt(t,["crudDomainStore"]);return m.a.createElement(Z,{crudDomainStore:e,modelName:"events",transform:function(t){return console.log("data",t),Pt(t)}},m.a.createElement(_t,n))},Mt=n(169),zt=n.n(Mt);function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Vt(t,e,n[e])})}return t}function Vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt,Nt,xt,It=function(t){var e=t.modelName,n=t.children,o=t.width,r=t.height,i=t.onCapture,c={width:o,height:r,facingMode:facingMode},a=m.a.useRef(null),u=m.a.useCallback(function(){var t=a.current.getScreenshot();i(t)},[a]),s=m.a.Children.map(n,function(t){var n=function(t,e,n){var o=Ct({},props,n.props);return o["".concat(t,"_capture")]=e,o}(e,u,t);return m.a.cloneElement(t,Ct({},n))});return m.a.createElement(m.a.Fragment,null,m.a.createElement(zt.a,{audio:!1,ref:a,screenshotFormat:"image/jpeg",width:o,height:r,videoConstraints:c}),s)},At=n(17),Ut=n.n(At);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bt(t,e,n){return e&&Jt(t.prototype,e),n&&Jt(t,n),t}function Ht(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Kt,Qt,Yt=(Nt=Ht((Tt=function(){function t(e,n){Gt(this,t),function(t,e,n,o){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}(this,"isConnected",Nt,this),this.socket=void 0,this.rootStore=void 0,this.SERVER=void 0,this.mapStore=h.u.map(),this.rootStore=e,this.SERVER=n}return Bt(t,[{key:"subscribe",value:function(t){var e=this,n=t.onInit,o=t.onConnect,r=t.onEvent,i=t.onDisconnect,c=t.channel,a=t.port,u="".concat(this.SERVER.socket,":").concat(a,"/").concat(c),s=Ut()(u);s.on("init",function(t){n(t)}),s.on("connect",function(){o()}),s.on(c,function(t){r(t),e.mapStore.set(c,[]),e.mapStore.set(c,[t])}),s.on("disconnect",function(){i()}),this.socket=s}},{key:"publish",value:function(t){var e=this,n=t.channel,o=t.value;return console.log(n,o),new Promise(function(t,r){e.socket.emit("".concat(n),o,function(e){return t(e)})})}},{key:"publishUpdate",value:function(t){var e=this,n=t.channel,o=t.value;return new Promise(function(t,r){e.socket.emit("".concat(n,"-update"),o,function(e){return t(e)})})}},{key:"publishDelete",value:function(t){var e=this,n=t.channel,o=t.value;return console.log("publish delete",n,o),new Promise(function(t,r){e.socket.emit("".concat(n,"-delete"),o,function(e){return t(e)})})}}]),t}()).prototype,"isConnected",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ht(Tt.prototype,"subscribe",[h.h],Object.getOwnPropertyDescriptor(Tt.prototype,"subscribe"),Tt.prototype),Ht(Tt.prototype,"publish",[h.h],Object.getOwnPropertyDescriptor(Tt.prototype,"publish"),Tt.prototype),Ht(Tt.prototype,"publishUpdate",[h.h],Object.getOwnPropertyDescriptor(Tt.prototype,"publishUpdate"),Tt.prototype),Ht(Tt.prototype,"publishDelete",[h.h],Object.getOwnPropertyDescriptor(Tt.prototype,"publishDelete"),Tt.prototype),Tt),Zt=function(t,e,n,o){var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Lt(t,e,n[e])})}return t}({channel:e,publish:function(n){return t.publish({value:n,channel:e})},subscribe:function(e){var n=e.onConnect,o=e.onEvent,r=e.onDisconnect,i=e.channel,c=e.onInit,a=e.port;return t.subscribe({onConnect:n,onEvent:o,onDisconnect:r,channel:i,onInit:c,port:a})}},n,o.props);return r["incoming_".concat(e)]=t.mapStore.get(e),r["".concat(e,"_update")]=function(n){return t.publishUpdate({channel:e,value:n})},r["".concat(e,"_delete")]=function(n){return t.publishDelete({channel:e,value:n})},r},$t=Object(p.a)(xt=function(t){function e(t){return Gt(this,e),Ft(this,qt(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,m.a.Component),Bt(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.channel,o=e.children,r=e.socketDomainStore,i=m.a.Children.map(o,function(e){var o=Zt(r,n,t.props,e);return m.a.cloneElement(e,o)});return m.a.createElement(m.a.Fragment,null,i)}}]),e}())||xt;function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ce(t,e,n[e])})}return t}function ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function se(t,e,n){return e&&ue(t.prototype,e),n&&ue(t,n),t}function le(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var fe,pe,he=(le((Kt=function(){function t(e,n){ae(this,t),this.rootStore=void 0,this.SERVER=void 0,this.schemas=h.u.map(),this.rootStore=e,this.SERVER=n}return se(t,[{key:"getSchemas",value:function(t){var e=this;if(!this.schemas.get("schemas")||t)return b.a.get("".concat(this.SERVER.host,":").concat(this.SERVER.port,"/schemas")).then(function(t){Object(h.x)(function(){var n=Object.keys(t.data).map(function(e){return ie({},{modelName:e},t.data[e])});e.schemas.set("schemas",n)})}).catch(function(t){Object(h.x)(function(){})})}},{key:"setError",value:function(t){console.error(t)}}]),t}()).prototype,"getSchemas",[h.h],Object.getOwnPropertyDescriptor(Kt.prototype,"getSchemas"),Kt.prototype),le(Kt.prototype,"setError",[h.h],Object.getOwnPropertyDescriptor(Kt.prototype,"setError"),Kt.prototype),Kt),ye=function(t,e,n){return ie({schemas:t.schemas.get("schemas")},e,n.props)},me=Object(p.a)(Qt=function(t){function e(t){return ae(this,e),ee(this,ne(e).call(this,t))}return oe(e,m.a.Component),se(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,o=e.adminDomainStore;o.getSchemas(!1);var r=m.a.Children.map(n,function(e){var n=ye(o,t.props,e);return m.a.cloneElement(e,n)});return m.a.createElement(m.a.Fragment,null,r)}}]),e}())||Qt;function de(t){var e;return Object(p.a)(e=function(e){function n(t){return ae(this,n),ee(this,ne(n).call(this,t))}return oe(n,m.a.Component),se(n,[{key:"componentDidMount",value:function(){this.props.adminDomainStore.getSchemas(!1)}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this.props.adminDomainStore,n=ye(e,this.props,this);return m.a.createElement(t,n)}}]),n}())||e}function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function we(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ee(t,e,n){return e&&we(t.prototype,e),n&&we(t,n),t}function ke(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Pe,Re,_e=(ke((fe=function(){function t(e,n,o){Se(this,t),this.modelName=void 0,this.gallery=h.u.map(),this.media=h.u.map(),this.rootStore=void 0,this.SERVER=void 0,this.offlineStorage=void 0,this.rootStore=e,n&&(this.offlineStorage=n),this.SERVER=o}return Ee(t,[{key:"uploadMedia",value:function(t){var e=this,n=t.modelName,o=t.extension,r=t.files,i=t.modelId,c=t.isMultiple,a=t.subRoute,u=new FormData;r.map(function(t,e){var r=new Blob([t],{type:o}),i=o.replace("image/",".");u.append(n+i,r,t.name.split(".")[0])});var s="".concat(a||"/",c?"gallery":"media");return this.offlineStorage.getItem("jwtToken").then(function(t){return b.a.post("".concat(e.SERVER.host,":").concat(e.SERVER.port,"/").concat(n).concat(s,"?token=").concat(t,"&query=").concat(i),u,{headers:{"content-type":"multipart/form-data"}}).then(function(t){return console.log("response from media",t),t}).catch(function(t){return e.setError(t)})})}},{key:"deleteMedia",value:function(t){var e=this,n=t.modelName,o=t.modelId,r=t.fileName,i=(t.subRoute,r.split("/")),c=i[i.length-1].split("?")[0];var a="".concat("/remove/","media");return this.offlineStorage.getItem("jwtToken").then(function(t){return b.a.delete("".concat(e.SERVER.host,":").concat(e.SERVER.port,"/").concat(n).concat(a,"?token=").concat(t,"&query=").concat(o,"&fileName=").concat(c)).then(function(t){return console.log("response from media",t),t}).catch(function(t){return e.setError(t)})})}},{key:"setError",value:function(t){console.error(t)}}]),t}()).prototype,"uploadMedia",[h.h],Object.getOwnPropertyDescriptor(fe.prototype,"uploadMedia"),fe.prototype),ke(fe.prototype,"setError",[h.h],Object.getOwnPropertyDescriptor(fe.prototype,"setError"),fe.prototype),fe),De=function(t){var e=t.mediaDomainStore,n=t.modelName,o=t.props,r=t.child,i=t.extension,c=t.subRoute,a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Oe(t,e,n[e])})}return t}({},o,r.props);return a["".concat(n,"_gallery")]=e.gallery.get(n),a["".concat(n,"_gallery_upload")]=function(t,o){return e.uploadMedia({modelName:n,extension:i,isMultiple:!0,files:o,modelId:t,subRoute:c})},a["".concat(n,"_media")]=e.media.get(n),a["".concat(n,"_media_upload")]=function(t,o){return e.uploadMedia({modelName:n,extension:i,isMultiple:!1,files:o,modelId:t,subRoute:c})},a["".concat(n,"_media_delete")]=function(t,o){return e.deleteMedia({modelName:n,modelId:t,fileName:o,subRoute:c})},a},Me=Object(p.a)(pe=function(t){function e(t){return Se(this,e),ve(this,ge(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(e,m.a.Component),Ee(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.modelName,o=e.children,r=e.mediaDomainStore,i=e.extension,c=e.subRoute,a=m.a.Children.map(o,function(e){var o=De({mediaDomainStore:r,modelName:n,props:t.props,child:e,extension:i,subRoute:c});return m.a.cloneElement(e,o)});return m.a.createElement(m.a.Fragment,null,a)}}]),e}())||pe;function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ce(t,e){return!e||"object"!==ze(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Te(t,e){return(Te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ie(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ae(t,e,n){return e&&Ie(t.prototype,e),n&&Ie(t,n),t}function Ue(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var We,Fe,qe=(Ue((Pe=function(){function t(e,n,o){xe(this,t),this.modelName=void 0,this.mapStore=h.u.map(),this.rootStore=void 0,this.SERVER=void 0,this.offlineStorage=void 0,this.rootStore=e,n&&(this.offlineStorage=n),this.SERVER=o}return Ae(t,[{key:"getModel",value:function(t,e){var n=this;if(!this.mapStore.get(t)||e)return this.offlineStorage.getItem("jwtToken").then(function(e){return b.a.get("".concat(n.SERVER.host,":").concat(n.SERVER.port,"/").concat(t,"/forms"),{params:{token:e}}).then(function(e){Object(h.x)(function(){n.mapStore.set(t,e.data)})}).catch(function(t){Object(h.x)(function(){})})})}},{key:"setError",value:function(t){console.error(t)}}]),t}()).prototype,"getModel",[h.h],Object.getOwnPropertyDescriptor(Pe.prototype,"getModel"),Pe.prototype),Ue(Pe.prototype,"setError",[h.h],Object.getOwnPropertyDescriptor(Pe.prototype,"setError"),Pe.prototype),Pe),Xe=function(t,e,n,o){var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Ne(t,e,n[e])})}return t}({form:t.mapStore.get(e)},n,o.props);return r["".concat(e,"_form")]=t.mapStore.get(e),r},Le=Object(p.a)(Re=function(t){function e(t){return xe(this,e),Ce(this,Ve(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Te(t,e)}(e,m.a.Component),Ae(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.modelName,o=e.children,r=e.formsDomainStore;n&&r.getModel(n,!1),console.log("rerender forms services",n);var i=m.a.Children.map(o,function(e){var o=Xe(r,n,t.props,e);return m.a.cloneElement(e,o)});return m.a.createElement(m.a.Fragment,null,i)}}]),e}())||Re;function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(t,e){return!e||"object"!==Ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qe(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $e(t,e,n){return e&&Ze(t.prototype,e),n&&Ze(t,n),t}function tn(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var en,nn,on,rn,cn=(tn((We=function(){function t(e,n,o){Ye(this,t),this.modelName=void 0,this.mapStore=h.u.map(),this.rootStore=void 0,this.SERVER=void 0,this.offlineStorage=void 0,this.rootStore=e,n&&(this.offlineStorage=n),this.SERVER=o}return $e(t,[{key:"forceUpdate",value:function(t){var e=this.mapStore.get(t);this.mapStore.set(t,[]),this.mapStore.set(t,e)}},{key:"subscribe",value:function(t){var e=this,n=t.onInit,o=t.onConnect,r=t.onEvent,i=t.onDisconnect,c=t.port,a=t.modelName,u=t.server,s="".concat(u,":").concat(c,"/").concat(a),l=Ut()(s);l.on("init",function(t){n(t)}),l.on("connect",function(){o()}),l.on("notification",function(t){r(t),e.mapStore.set("notification",[]),e.mapStore.set("notification",[t])}),l.on("disconnect",function(){i()}),this.socket=l}},{key:"publish",value:function(t){var e=this,n=t.channel,o=t.value;return new Promise(function(t,r){e.socket.emit("".concat(n),o,function(e){return t(e)})})}},{key:"saveNotification",value:function(t,e){var n=this.mapStore.get(t);n||(this.mapStore.set(t,[]),n=[]);var o=this.mapStore.get(t);this.mapStore.set(t,Qe(o).concat([e]))}},{key:"removeNotification",value:function(t,e){e.deleted=!0,this.forceUpdate(t)}}]),t}()).prototype,"forceUpdate",[h.h],Object.getOwnPropertyDescriptor(We.prototype,"forceUpdate"),We.prototype),tn(We.prototype,"subscribe",[h.h],Object.getOwnPropertyDescriptor(We.prototype,"subscribe"),We.prototype),tn(We.prototype,"publish",[h.h],Object.getOwnPropertyDescriptor(We.prototype,"publish"),We.prototype),tn(We.prototype,"saveNotification",[h.h],Object.getOwnPropertyDescriptor(We.prototype,"saveNotification"),We.prototype),tn(We.prototype,"removeNotification",[h.h],Object.getOwnPropertyDescriptor(We.prototype,"removeNotification"),We.prototype),We),an=Object(p.a)(Fe=function(t){function e(t){return Ye(this,e),Be(this,He(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ke(t,e)}(e,m.a.Component),$e(e,[{key:"componentDidMount",value:function(){var t=this.props,e=(t.children,t.notificationDomainStore),n=t.modelName;e.subscribe({modelName:n,port:"5000",server:"http://localhost",onInit:function(){console.log("on init")},onConnect:function(){console.log("on connected")},onEvent:function(t){e.saveNotification(n,{type:"warning",message:t})},onDisconnect:function(){console.log("disconnected")}})}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,o=e.notificationDomainStore,r=e.modelName,i=m.a.Children.map(n,function(e){return m.a.cloneElement(e,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Je(t,e,n[e])})}return t}({notifications:o.mapStore.get(r),saveNotification:function(t){return o.saveNotification(r,t)},removeNotification:function(t){return o.removeNotification(r,t)}},t.props,e.props))});return m.a.createElement(m.a.Fragment,null,i)}}]),e}())||Fe;function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pn(t,e,n,o){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function hn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mn(t,e,n){return e&&yn(t.prototype,e),n&&yn(t,n),t}function dn(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var bn=(nn=dn((en=function(){function t(e,n,o){hn(this,t),pn(this,"characterPosition",nn,this),pn(this,"stageX",on,this),this.modelName=void 0,this.mapStore=h.u.map(),this.rootStore=void 0,this.SERVER=void 0,this.offlineStorage=void 0,this.rootStore=e,n&&(this.offlineStorage=n),this.SERVER=o,this.setCharacterPosition=this.setCharacterPosition.bind(this),this.setStageX=this.setStageX.bind(this)}return mn(t,[{key:"setCharacterPosition",value:function(t){this.characterPosition=t}},{key:"setStageX",value:function(t){this.stageX=t>0?0:t<-2048?-2048:t}}]),t}()).prototype,"characterPosition",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{x:0,y:0}}}),on=dn(en.prototype,"stageX",[h.u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dn(en.prototype,"setCharacterPosition",[h.h],Object.getOwnPropertyDescriptor(en.prototype,"setCharacterPosition"),en.prototype),dn(en.prototype,"setStageX",[h.h],Object.getOwnPropertyDescriptor(en.prototype,"setStageX"),en.prototype),en),vn=Object(p.a)(rn=function(t){function e(t){return hn(this,e),sn(this,ln(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(e,m.a.Component),mn(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this.props,e=t.gameDomainStore,n=t.children,o=m.a.Children.map(n,function(t){return m.a.cloneElement(t,{characterPosition:e.characterPosition,setCharacterPosition:e.setCharacterPosition,setStageX:e.setStageX,stageX:e.stageX,fileLocation:"".concat(e.SERVER.host,":").concat(e.SERVER.port,"/game/file")})});return m.a.createElement(m.a.Fragment,null,o)}}]),e}())||rn;n.d(e,"LoginWithAuth",function(){return T}),n.d(e,"RegisterWithAuth",function(){return N}),n.d(e,"authDomainStore",function(){return C}),n.d(e,"authUiStore",function(){return V}),n.d(e,"withAuth",function(){return A}),n.d(e,"Auth",function(){return I}),n.d(e,"Crud",function(){return mt}),n.d(e,"crudDomainStore",function(){return Q}),n.d(e,"withCrud",function(){return yt}),n.d(e,"Socket",function(){return $t}),n.d(e,"socketDomainStore",function(){return Yt}),n.d(e,"Admin",function(){return me}),n.d(e,"withAdmin",function(){return de}),n.d(e,"adminDomainStore",function(){return he}),n.d(e,"Media",function(){return Me}),n.d(e,"mediaDomainStore",function(){return _e}),n.d(e,"Forms",function(){return Le}),n.d(e,"formsDomainStore",function(){return qe}),n.d(e,"Notification",function(){return an}),n.d(e,"notificationDomainStore",function(){return cn}),n.d(e,"Game",function(){return vn}),n.d(e,"gameDomainStore",function(){return bn}),n.d(e,"Event",function(){return _t}),n.d(e,"EventWithCrud",function(){return Dt}),n.d(e,"Camera",function(){return It})}})});